function setContextualHelpers(){var a="tr"===this.tagName.toLowerCase()?this:jQuery(this).parents("tr").get(0),b=a.querySelector(".ir-sb-rule-condition").value,c=a.querySelector("input.ir-sb-rule-value"),d=c.cloneNode(!0),e=jQuery(d);switch(jQuery(a.querySelectorAll(".ir-sb-helper")).remove(),d.removeAttribute("name"),d.className+=" ir-sb-helper",c.parentNode.insertBefore(d,c.nextSibling),d.style.display="block",e.change(function(){c.value=this.value}),c.style.display="none",b){default:d.placeholder="Enter a comma-separated list of values.";break;case"":case"everywhere":c.value="",d.style.display="none";break;case"is_single":case"is_post":d.placeholder="Enter a comma-separated list of post slugs or post ID's.",e.suggest(ajaxurl+"?action=stb_autocomplete&type=post",{multiple:!0,multipleSep:","});break;case"is_page":d.placeholder="Enter a comma-separated list of page slugs or page ID's.",e.suggest(ajaxurl+"?action=stb_autocomplete&type=page",{multiple:!0,multipleSep:","});break;case"is_post_type":d.placeholder="Enter a comma-separated list of post types.",e.suggest(ajaxurl+"?action=stb_autocomplete&type=post_type",{multiple:!0,multipleSep:","});break;case"is_url":d.placeholder="Enter a comma-separated list of relative URL's, eg /contact/";break;case"is_post_in_category":e.suggest(ajaxurl+"?action=stb_autocomplete&type=category",{multiple:!0,multipleSep:","});break;case"manual":d.placeholder="",manualHintElement.style.display=""}}function displayAdditionalOptions(){var a=jQuery(".ir-sb-auto-show:checked").val();""==a?(jQuery("#ir-sb-auto-show-options").css("display","none"),jQuery("#ir-sb-custom-rules-options").css("display","table-row-group"),jQuery("#ir-sb-box-rules").css("display","table-row-group"),jQuery("#ir-sb-box-rules-button").css("display","table-row-group")):"percentage"==a||"element"==a||"instant"==a?(jQuery("#ir-sb-auto-show-options").css("display","table-row-group"),jQuery("#ir-sb-custom-rules-options").css("display","table-row-group"),jQuery("#ir-sb-box-rules").css("display","table-row-group"),jQuery("#ir-sb-box-rules-button").css("display","table-row-group")):(jQuery("#ir-sb-auto-show-options").css("display","table-row-group"),jQuery("#ir-sb-custom-rules-options").css("display","none"),jQuery("#ir-sb-box-rules").css("display","none"),jQuery("#ir-sb-box-rules-button").css("display","none"))}function loadPreview(){var a=document.getElementById("post_ID");if("undefined"!=typeof a&&null!=a){var b=a.value||0;if("object"==typeof window.tinyMCE&&null!=tinyMCE.get("content")){$editorFrame=jQuery("#content_ifr"),$editor=$editorFrame.contents().find("html"),$editor.css({background:"white"}),$innerEditor=$editor.find("#tinymce"),$innerEditor.addClass("ir-sb ir-sb-"+b),$innerEditor.get(0).style.cssText+=";padding: 25px !important;";var c=tinyMCE.get("content").getContent();if(""!==c){var d=jQuery("#ir-sb-background-color").val(),e=jQuery("#ir-sb-text-color").val(),f=jQuery("#ir-sb-width").val(),g=jQuery("#ir-sb-border-color").val(),h=jQuery("#ir-sb-border-width").val(),i=jQuery("#ir-sb-border-style").val();$innerEditor.css({margin:0,color:e,"background-color":d,display:"inline-block",width:f,position:"relative",border:h+"px "+i+" "+g})}else $innerEditor.css({margin:0,color:"black",background:"white",display:"inline-block",width:"auto","min-width":"140px",position:"relative"});jQuery("#ir-sb-background-color").on("blur",function(){var a=jQuery(this).val();$innerEditor.css({"background-color":a})}),jQuery("#ir-sb-text-color").on("blur",function(){var a=jQuery(this).val();$innerEditor.css({color:a})}),jQuery("#ir-sb-border-color").on("blur",function(){var a=jQuery(this).val();$innerEditor.css({"border-color":a})}),jQuery("#ir-sb-width").on("blur",function(){var a=jQuery(this).val();$innerEditor.css({width:a+"px"})}),jQuery("#ir-sb-border-width").on("blur",function(){var a=jQuery(this).val();$innerEditor.css({"border-width":a+"px"})}),jQuery("#ir-sb-border-style").on("blur",function(){var a=jQuery(this).val();$innerEditor.css({"border-style":a})}),manualStyleEl=document.createElement("style"),manualStyleEl.setAttribute("type","text/css"),manualStyleEl.id="ir-sb-manual-css-style";var j=jQuery("#ir-sb-manual-css").val(),k=document.createTextNode(j);manualStyleEl.appendChild(k),jQuery(manualStyleEl).appendTo($editor.find("head"))}}}jQuery(document).ready(function(a){jQuery(".ir-sb-color-field").wpColorPicker(),displayAdditionalOptions(),jQuery(".ir-sb-auto-show").change(function(){displayAdditionalOptions()});var b=document.getElementById("ir-scroll-box-options-controls"),c=jQuery(b);c.on("change","#ir-sb-rule-condition",setContextualHelpers)}),jQuery(window).load(function(){loadPreview()});